# μ„Ήμ… 2 μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬ μ΄ν•΄1 - μμ  λ§λ“¤κΈ°

# ν”„λ΅μ νΈ μƒμ„±

<aside>
π’΅ λ©ν‘: μμν• μλ°”λ΅ μ¤ν”„λ§ κ°λ° β†’ μ‹¤μ  μ”κµ¬μ‚¬ν•­μ—μ„ λ€μ²κ°€ κ°€λ¥ν•κ°€?

</aside>

## ν

- μΈν…”λ¦¬μ μ΄μ—μ„ gradle λΉλ“ μ„¤μ •μ„ intelij λ΅ λ³€κ²½
    - gradle ν†µν•΄μ„ μ¤ν”„λ§ λ¶€νΈ μ‹¤ν–‰ν•λ”κ²ƒ λ³΄λ‹¤ intelij κ°€ μ§μ ‘ jvm μ„ μ‹¤ν–‰μ‹ν‚¤λ”κ² λΉ λ¥΄λ‹¤ ν•μ‹¬
        - λμ•„κ°€λ” κµ¬μ΅°λ” gradle μ΄ jvm μ„ μ‹¤ν–‰ν•λ” κ³Όμ •κ³Ό ν¬κ² λ‹¤λ¥Όκ²ƒμ€ μ—†μ

# λΉ„μ¦λ‹μ¤ μ”κµ¬μ‚¬ν•­κ³Ό μ„¤κ³„

## νμ›

- νμ›μ„ κ°€μ…ν•κ³  μ΅°νν•  μ μμ
- νμ›μ€ μΌλ°κ³Ό VIP λ‘κ°€μ§€ λ“±κΈ‰μ΄ μμ
- νμ› λ°μ΄ν„°λ” μμ²΄ DB λ¥Ό κµ¬μ¶• ν•  μ μκ³ , μ™Έλ¶€ μ‹μ¤ν…κ³Ό μ—°λ™ν•  μ μμ(λ―Έν™•μ •)

## μ£Όλ¬Έκ³Ό ν• μΈ μ •μ±…

- νμ›μ€ μƒν’μ„ μ£Όλ¬Έ ν•  μ μμ
- νμ› λ“±κΈ‰μ— λ”°λΌ ν• μΈ μ •μ±…μ„ μ μ© ν•  μ μμ
- ν• μΈ μ •μ±…μ€ λ¨λ“  VIP λ” 1000μ›μ„ ν• μΈν•΄μ£Όλ” κ³ μ • κΈμ•΅ ν• μΈμ€ μ μ©ν•΄ λ‹¬λΌ
    - λ‚μ¤‘μ— λ³€κ²½ λ  μ μμ
- ν• μΈ μ •μ±…μ€ λ³€κ²½ κ°€λ¥μ„±μ΄ λ†’λ‹¤
    - νμ‚¬ κΈ°λ³Έ ν• μΈ μ •μ±…μ„ μ•„μ§ μ •ν•μ§€ λ»ν–κ³ , μ¤ν” μ§μ „κΉμ§€ κ³ λ―Όμ„ λ―Έλ£¨κ³  μ‹¶λ‹¤
    - μµμ•…μ κ²½μ° ν• μΈμ„ μ μ©ν•μ§€ μ•μ„ μ λ„ μλ‹¤(λ―Έν™•μ •)

## μ •λ¦¬

- μ”κµ¬μ‚¬ν•­μ„ λ³΄λ©΄ νμ› λ°μ΄ν„°, ν• μΈ μ •μ±… κ°™μ€ λ¶€λ¶„μ€ μ§€κΈ κ²°μ •ν•κΈ° μ–΄λ ¤μ΄ λ¶€λ¶„
- κ·Έλ ‡λ‹¤κ³  μ΄λ° μ •μ±…μ΄ κ²°μ •λ  λ• κΉμ§€ κ°λ°μ„ λ¬΄κΈ°ν• κΈ°λ‹¤λ¦΄ μ μ—†μ
- μΈν„°νμ΄μ¤λ¥Ό λ§λ“¤κ³  κµ¬ν„μ²΄λ¥Ό μ–Έμ λ“ μ§€ κ°μ•„λΌμΈ μ μλ„λ΅ μ„¤κ³„ν•΄μ•Όν•¨

> β€μ°Έκ³ β€ ν”„λ΅μ νΈ ν™κ²½μ„¤μ •μ„ νΈλ¦¬ν•κ² ν•λ ¤κ³  μ¤ν”„λ§ λ¶€νΈλ¥Ό μ‚¬μ©ν• κ²ƒ
μ§€κΈμ€ μ¤ν”„λ§ μ—†λ” μμν• μλ°”λ΅λ§ κ°λ°μ„ μ§„ν–‰ν•λ‹¤λ” μ μ„ κΈ°μ–µν•μ
> 

# νμ‚¬ λ„λ©”μΈ μ„¤κ³„

## νμ› λ„λ©”μΈ μ”κµ¬μ‚¬ν•­

- νμ›μ„ κ°€μ…ν•κ³  μ΅°νν•  μ μλ‹¤
- νμ›μ€ μΌλ°κ³Ό VIP λ‘ κ°€μ§€ λ“±κΈ‰μ΄ μλ‹¤
- νμ› λ°μ΄ν„°λ” μμ²΄ db λ¥Ό κµ¬μ¶• ν•  μ μκ³ , μ™Έλ¶€ μ‹μ¤ν…κ³Ό μ—°λ™ ν•  μ μλ‹¤

## νμ› λ„λ©”μΈ ν‘λ ¥ κ΄€κ³„

- ν΄λΌμ΄μ–ΈνΈ β†’ νμ› μ„λΉ„μ¤(νμ›κ°€μ…, νμ›μ΅°ν) β†’ νμ› μ €μ¥μ† (λ©”λ¨λ¦¬, db, μ™Έλ¶€μ‹μ¤ν… μ—°λ™)
- **κ°λ°μ λΏλ§ μ•„λ‹ κΈ°νμλ„ λ³Όμμλ” κµ¬μ΅°**
- νμ› μ €μ¥μ†
    - νμ› λ°μ΄ν„°μ— μ ‘κ·Όν•λ” κ³„μΈµμ„ μƒλ΅ λ§λ“¬
    - μ—­ν™ κµ¬ν„(κµ¬ν„μ²΄λ¥Ό μ„ νƒν•λ©΄ λ¨)
        - λ©”λ¨λ¦¬ νμ› μ €μ¥μ†
            - λ©”λ¨λ¦¬μ΄κΈ° λ•λ¬Έμ— μ΄μμ©μΌλ΅λ” λ»μ”€
        - db νμ› μ €μ¥μ†
        - μ™Έλ¶€ μ‹μ¤ν… μ—°λ™ νμ› μ €μ¥μ†

## νμ› ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨

- `MemberService` β† `MemberServiceImpl` β†’ `MemberRepository`
- `MemberService`: interface
- `MemberServiceImpl`
    - κµ¬ν„μ²΄
- `MemberRepository`: interface, νμ› μ €μ¥μ†
    - `MemoryMemberRepository`
    - `DbMemberRepository`
- μ‹¤μ  μ„λ²„λ¥Ό κµ¬λ™ν•μ§€ μ•κ³  ν΄λμ¤λ“¤λ§ λ¶„μ„ν•΄μ„ λ³Ό μ μλ” κ·Έλ¦Ό
    - κ·Έλ°λ° κµ¬ν„μ²΄λ“¤μ΄ λ™μ μΌλ΅ κ²°μ •λλ”κ²ƒλ“¤, μ¦‰ μ„λ²„κ°€ λ° λ• new κ²°μ •μ„ ν•λ” κ²ƒλ“¤ λ•λ¬Έμ— ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨ λ§μΌλ΅ λ³΄κ³  νλ‹¨ν•κΈ° μ–΄λ ¤μ›€
    - κ·Έλμ„ κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨μ΄λΌλ”κ² μμ–΄μ•Ό ν•¨

## νμ› κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨

<aside>
π’΅ λ©”λ¨λ¦¬κ°„μ μ°Έμ΅°λ“¤μ΄ μ–΄λ–»κ² λλ”μ§€

</aside>

- ν΄λΌμ΄μ–ΈνΈ β†’ νμ› μ„λΉ„μ¤ β†’ λ©”λ¨λ¦¬ νμ› μ €μ¥μ†
- νμ› μ„λΉ„μ¤: `MemberServiceImpl`

# νμ› λ„λ©”μΈ κ°λ°

<aside>
π’΅ λ³Έκ²©μ μΈ κ°λ°

</aside>

# νμ› λ„λ©”μΈ μ‹¤ν–‰κ³Ό ν…μ¤νΈ

<aside>
π’΅ μ§€λ‚ μ‹κ°„μ— λ§λ“  μ½”λ“λ“¤μ΄ μ •μƒ λ™μ‘ν•λ”μ§€ ν…μ¤νΈ

</aside>

- ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨μ μ½”λ“λ“¤μ€ μ „λ¶€ κµ¬ν„
- νμ› κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨μ΄ μ‹¤μ  λ™μ‘ν•λ”μ§€ ν™•μΈ

## TroubleShooting

- κ°•μ‚¬λ‹μ€ μΌλ°μ μΈ μ½”λ“μ—μ„ ν…μ¤νΈ μ½”λ“ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•λ” μ½”λ“λ¥Ό λ³΄μ—¬μ£Όμ…¨λ”λ° μΌλ°μ μΈ μ„¤μ •μΌλ΅ ν•΄λ‹Ή μ½”λ“λ¥Ό λλ ¤λ³΄λ©΄ μ¤λ¥κ°€ λ°μƒν–μ
- μ΄μ λ¥Ό μ°Ύμ•„λ³΄λ‹ testImplementation μ€ test μ—μ„λ§ λΌμ΄λΈλ¬λ¦¬λ¥Ό κ°€μ Έμ¤λ” μ½”λ“μ€μ–΄μ„ μ¤λ¥κ°€ λ‚  μ λ°–μ— μ—†μ—μ
- dependency λ¥Ό ν•΄λ‹Ή μ½”λ“μ²λΌ μμ •ν•΄μ¤μ•Όλ§ λμ•„κ°

```java
dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-jdbc'
    implementation 'org.junit.jupiter:junit-jupiter:5.8.1'
    implementation 'org.springframework.boot:spring-boot-starter-test'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
}
```

## νμ› λ„λ©”μΈ μ„¤κ³„μ λ¬Έμ μ 

- μ΄ μ½”λ“μ μ„¤κ³„μƒ λ¬Έμ μ μ€ λ¬΄μ—‡μΌκΉμ”?
- λ‹¤λ¥Έ μ €μ¥μ†λ΅ λ³€κ²½ν•  λ• OCP μ›μΉ™μ„ μ¤€μν•  κΉμ”?
- DIP λ¥Ό μ μ§€ν‚¤κ³  μμ„κΉμ”?
- **μμ΅΄κ΄€κ³„κ°€ μΈν„°νμ΄μ¤ λΏλ§ μ•„λ‹λΌ κµ¬ν„κΉμ§€ λ¨λ‘ μμ΅΄ν•λ” λ¬Έμ μ μ΄ μμ**
    - **μ£Όλ¬ΈκΉμ§€ λ§λ“¤κ³ λ‚μ„ λ¬Έμ μ κ³Ό ν•΄κ²° λ°©μ•μ„ μ„¤λ…**
- κµ¬ν„μ²΄λ” μΈν„°νμ΄μ¤λ¥Ό μμ΅΄ν•κ³ μμ
    - ν•μ§€λ§ μ‹¤μ  ν• λ‹Ήν•λ” λ¶€λ¶„μ€ κµ¬ν„μ²΄μ— μμ΅΄λ¨
    - μ¶”μƒν™”μ—λ„ μμ΅΄ν•κ³  κµ¬ν„μ²΄μ—λ„ μμ΅΄λ¨

```java
 private final MemberRepository memberRepository = new MemoryMemberRepository();
 // λ§μ•½ MemoryMemberRepository λ§κ³  λ‹¤λ¥Έ κµ¬ν„μ²΄λ¥Ό μ¨μ•Ό ν•λ‹¤λ©΄??
```

# μ£Όλ¬Έκ³Ό ν• μΈ λ„λ©”μΈ μ„¤κ³„

## μ£Όλ¬Έκ³Ό ν• μΈ μ •μ±…

- νμ›μ€ μƒν’μ„ μ£Όλ¬Έν•  μ μλ‹¤
- νμ› λ“±κΈ‰μ— λ”°λΌ ν• μΈ μ •μ±…μ„ μ μ©ν•  μ μλ‹¤
- ν• μΈ μ •μ±…μ€ λ¨λ“  VIP λ” 1000μ› ν• μΈν•΄μ£Όλ” κ³ μ • κΈμ•΅ ν• μΈμ„ μ μ©ν•΄ λ‹¬λΌ
    - λ‚μ¤‘μ— λ³€κ²½ κ°€λ¥
- ν• μΈ μ •μ±…μ€ λ³€κ²½ κ°€λ¥μ„±μ΄ λ†’λ‹¤
- νμ‚¬μ κΈ°λ³Έ ν• μΈ μ •μ±…μ€ μ•„μ§ μ •ν•μ§€ μ•μ•κ³ , μ¤ν” μ§μ „κΉμ§€ κ³ λ―Όμ„ λ―Έλ£¨κ³  μ‹¶λ‹¤
- μµμ•…μ κ²½μ° ν• μΈμ„ μ μ©ν•μ§€ μ•μ„ μ μλ‹¤

## μ£Όλ¬Έ λ„λ©”μΈ ν‘λ ¥ μ—­ν™ μ±…μ„

### ν΄λΌμ΄μ–ΈνΈ

- μ£Όλ¬Έ μƒμ„±
    - νμ› id
    - μƒν’λ…
    - μƒν’ κ°€κ²©

### μ£Όλ¬Έ μ„λΉ„μ¤ μ—­ν™

### νμ› μ €μ¥μ† μ—­ν™(νμ› μ΅°ν)

### ν• μΈ μ •μ±… μ—­ν™(ν• μΈ μ μ©)

- μ£Όλ¬Έ μƒμ„±: ν΄λΌμ΄μ–ΈνΈλ” μ£Όλ¬Έ μ„λΉ„μ¤μ— μ£Όλ¬Έ μƒμ„±μ„ μ”μ²­
- νμ› μ΅°ν: ν• μΈμ„ μ„ν•΄μ„λ” νμ› λ“±κΈ‰μ΄ ν•„μ”ν•λ‹¤. κ·Έλμ„ μ„λΉ„μ¤λ” νμ› μ €μ¥μ†μ—μ„ νμ›μ„ μ΅°νν•λ‹¤
- ν• μΈ μ μ©: μ£Όλ¬Έ μ„λΉ„μ¤λ” νμ› λ“±κΈ‰μ— λ”°λ¥Έ ν• μΈ μ—¬λ¶€λ¥Ό ν• μΈ μ •μ±…μ— μ„μ„ν•λ‹¤
- μ£Όλ¬Έ κ²°κ³Ό λ°ν™: μ£Όλ¬Έ μ„λΉ„μ¤λ” ν• μΈ κ²°κ³Όλ¥Ό ν¬ν•¨ν• μ£Όλ¬Έ κ²°κ³Όλ¥Ό λ°ν™ν•λ‹¤
    - μμ„Έν•κ² ν•λ©΄ λ³µμ΅ν•΄μ Έμ„ λ‹¨μν μ£Όλ¬Έ κ²°κ³Ό κ°μ²΄λ¥Ό λ§λ“¤μ–΄μ„ ν΄λΌμ΄μ–ΈνΈμ— λ³΄λ‚΄λ”κ²ƒ κΉμ§€λ§
    - μ‹¤μ  DB μ— μ €μ¥ν•λ” κ³Όμ •μ€ μƒλµ

## μ—¬κΈ°μ„ ν‘λ ¥ μ—­ν™ μ±…μ„μ— λ€ν•΄μ„

- ν‘λ ¥: κ°μ²΄λ“¤λΌλ¦¬ λ©”μ„Έμ§€λ¥Ό μ£Όκ³  λ°›μΌλ©° μƒνΈμ‘μ©μ„ ν•λ”κ²ƒ
- μ—­ν™: κµ¬ν„μ²΄κ°€ μ•„λ‹ μΈν„°νμ΄μ¤λ΅μ„ μ—­ν™λ§ μν–‰ν•λ”κ²ƒ
- μ±…μ„: κ°μ²΄κ°€ ν‘λ ¥ν•κΈ° μ„ν•΄ μν–‰ν•λ” λ΅μ§
    - κ°μ²΄κ°€ λ³€κ²½λ¬μ„λ• μμ •μ‚¬ν•­μ΄ λ§μ•„μ§€κ³  μ μ–΄μ§μ„ μ±…μ„λ¶„λ°°λ¥Ό ν•΄μ¤μ•Όν•¨

## μ£Όλ¬Έ λ„λ©”μΈ μ „μ²΄

- **ν΄λΌμ΄μ–ΈνΈ**
- **μ£Όλ¬Έ μ„λΉ„μ¤ μ—­ν™**
    - μ£Όλ¬Έ μ„λΉ„μ¤ κµ¬ν„μ²΄
- νμ› μ΅°ν
    - **νμ› μ„λΉ„μ¤ μ—­ν™**
        - λ©”λ¨λ¦¬ νμ› μ €μ¥μ†
        - DB μ €μ¥μ†
- ν• μΈ μ μ©
    - **ν• μΈ μ •μ±… μ—­ν™**
        - μ •μ•΅ ν• μΈ μ •μ±…
            - μ λ€ κ°€κ²© ν• μΈ
        - μ •λ¥  ν• μΈ μ •μ±…
            - λΉ„μ¨μ— λ”°λ¥Έ κ°€κ²© ν• μΈ
        
- **μ—­ν™κ³Ό κµ¬ν„μ„ λ¶„λ¦¬**ν•΄μ„ μμ λ΅­κ² κµ¬ν„ κ°μ²΄λ¥Ό μ΅°λ¦½ν•  μ μκ² μ„¤κ³„ν–λ‹¤. λ•λ¶„μ— νμ› μ €μ¥μ†λ” λ¬Όλ΅ μ΄κ³ , ν• μΈ μ •μ±…λ„ μ μ—°ν•κ² λ³€κ²½ ν•  μ μλ‹¤

## μ£Όλ¬Έ λ„λ©”μΈ ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨

- OrderService: interface
- OrderServiceImpl
    - MemberRepository: interface
        - MemoryMemberRepository
        - DbMemberRepository
    - DiscountPolicy: interface
        - FixDiscountPolicy
        - RateDiscountPolicy

## μ£Όλ¬Έ λ„λ©”μΈ κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨1

<aside>
π’΅ ν΄λΌμ΄μ–ΈνΈ β†’ μ£Όλ¬Έ μ„λΉ„μ¤ κµ¬ν„μ²΄ β†’ λ©”λ¨λ¦¬ νμ› μ €μ¥μ†, μ •μ•΅ ν• μΈ μ •μ±…

</aside>

- νμ›μ„ λ©”λ¨λ¦¬μ—μ„ μ΅°νν•κ³ , μ •μ•΅ ν• μΈ μ •μ±…(κ³ μ • κΈμ•΅)μ„ μ§€μ›ν•΄λ„ μ£Όλ¬Έ μ„λΉ„μ¤λ¥Ό λ³€κ²½ν•μ§€ μ•μ•„λ„ λλ‹¤
- **μ—­ν™λ“¤μ ν‘λ ¥κ΄€κ³„λ¥Ό κ·Έλ€λ΅ μ¬μ‚¬μ© κ°€λ¥**
    - λ©”λ¨λ¦¬μ—μ„ DB λ΅ λ°”λ€κ³  μ •μ•΅μ—μ„ μ •λ¥  μ„λΉ„μ¤λ΅ λ³€κ²½ν•΄λ„ μ£Όλ¬Έ μ„λΉ„μ¤ κµ¬ν„μ²΄λ¥Ό λ³€κ²½ν•  ν•„μ”κ°€ μ—†μ
    - μ΅°μ©νΈλ‹μ΄ κ°μ²΄μ§€ν–¥μ μ‚¬μ‹¤κ³Ό μ¤ν•΄ λΌλ” μ±…μ΄ μ΄κ±Έ ν•λ‚λ§ κ°€μ§€κ³  μ“΄ μ±…
        - μ΄κ² ν•µμ‹¬μΈλ° μ½μ–΄λ³΄λ©΄ λ„μ›€λ¨
        - 

## μ£Όλ¬Έ λ„λ©”μΈ κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨2

<aside>
π’΅ ν΄λΌμ΄μ–ΈνΈ β†’ μ£Όλ¬Έ μ„λΉ„μ¤ κµ¬ν„μ²΄ β†’ DB νμ› μ €μ¥μ†, μ •λ¥  ν• μΈ μ •μ±…

</aside>

- νμ›μ„ λ©”λ¨λ¦¬κ°€ μ•„λ‹ μ‹¤μ  DB μ—μ„ μ΅°νν•κ³ , μ •λ¥  ν• μΈ μ •μ±…(μ£Όλ¬Έ κΈμ•΅μ— λ”°λΌ % ν• μΈ)μ„ μ§€μ›ν•΄λ„ μ£Όλ¬Έ μ„λΉ„μ¤λ¥Ό λ³€κ²½ν•μ§€ μ•μ•„λ„ λλ‹¤
- ν‘λ ¥κ΄€κ³„λ¥Ό κ·Έλ€λ΅ μ¬μ‚¬μ© ν•  μ μλ‹¤

# μ£Όλ¬Έκ³Ό ν• μΈ λ„λ©”μΈ κ°λ°

# μ£Όλ¬Έκ³Ό ν• μΈ λ„λ©”μΈ μ‹¤ν–‰κ³Ό ν…μ¤νΈ