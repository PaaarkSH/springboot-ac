# μ„Ήμ…3 κ°μ²΄ μ§€ν–¥ μ›λ¦¬ μ μ©

# μƒλ΅μ΄ ν• μΈ μ •μ±… κ°λ°

## μƒλ΅μ΄ ν• μΈ μ •μ±… ν™•μ¥

- μ•…λ• κΈ°νμ: μ„λΉ„μ¤ μ¤ν” μ§μ „μ— ν• μΈ μ •μ±…μ„ μ§€κΈμ²λΌ κ³ μ • κΈμ•΅ ν• μΈμ΄ μ•„λ‹λΌ μΆ€ λ” ν•©λ¦¬μ μΈ μ£Όλ¬Έ κΈμ•΅λ‹Ή ν• μΈν•λ” μ •λ¥  ν• μΈμΌλ΅ λ³€κ²½ν•κ³  μ‹¶μ
    - μλ¥Ό λ“¤μ–΄ κΈ°μ΅΄ μ •μ±…μ€ VIP κ°€ 10000μ›μ„ μ£Όλ¬Έν•λ“  20000μ›μ„ μ£Όλ¬Έν•λ“  ν•­ μƒ 1000μ›μ„ ν• μΈν•λ”λ°, μ΄λ²μ— μƒλ΅ λ‚μ¨ μ •μ±…μ€ 10% λ΅ μ§€μ •ν•΄λ‘λ©΄ κ³ κ°μ΄ 10000μ›μ„ ν• μΈν•΄μ£Όκ³ , 20000μ› μ£Όλ¬Έμ‹μ— 2000μ› ν• μΈμ„ ν•΄μ£Όλ” λ°©μ‹
- μμ§„ κ°λ°μ: μ²μλ¶€ν„° κ³ μ • κΈμ•΅μ€ μ•„λ‹μ€μ
- μ•…λ•κΈ°νμ: μ—μμΌ μ†ν”„νΈ μ›¨μ–΄ κ°λ°μ— λ³΄λ©΄ β†’ κ³„νμ„ λ”°λ¥΄κΈ° λ³΄λ‹¤ λ³€ν™”μ— λ€μ‘
- μμ§„ κ°λ°μ: μ΄λ―Έ κ°μ²΄μ§€ν–¥ μ›μΉ™μ„ μ§€μΌ°κΈ° λ•λ¬Έμ— κ°€λ¥

<aside>
π’΅ κ°μ²΄ μ§€ν–¥ μ›μΉ™μ„ μ μ¤€μν–λ”μ§€ ν™•μΈν•΄λ³΄μ. μ΄λ²μ—λ” μ£Όλ¬Έ κΈμ•΅μ % ν• μΈμ„ ν•΄μ£Όλ” μƒλ΅μ΄ μ •λ¥  ν• μΈ μ •μ±…μ„ μ¶”κ°€ν•΄λ³΄μ

</aside>

## RateDiscountPolicy μ¶”κ°€

- OrderServiceImple β†’ DiscountPolicy(interface)

# μƒλ΅μ΄ ν• μΈ μ •μ±… μ μ©κ³Ό λ¬Έμ μ 

## λ°©κΈ μ¶”κ°€ν• ν• μΈ μ •μ±…μ„ μ μ©ν•΄λ³΄μ

## ν• μΈ μ •μ±…μ„ μ–΄ν”λ¦¬μΌ€μ΄μ…μ— μ μ©ν•΄λ³΄μ

- κΈ°μ΅΄μ— μ‚¬μ©ν–λ μ½”λ“μ—μ„ μƒλ΅μ΄ μ •μ±… κµ¬ν„μ²΄λ΅ λ³€κ²½ν•΄μ¤¬μ

```java
    // private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
```

- **ν• μΈ μ •μ±…μ„ λ³€κ²½ν•λ ¤λ©΄ ν΄λΌμ΄μ–ΈνΈμΈ OrderServiceImpl μ½”λ“λ¥Ό κ³ μ³μ•Ό ν•λ‹¤**

## λ¬Έμ μ  λ°κ²¬

- μ°λ¦¬λ” μ—­ν™κ³Ό κµ¬ν„μ„ μ¶©μ‹¤ν•κ² λ¶„λ¦¬ν–λ‹¤ β†’ OK
- λ‹¤ν•μ„±λ„ ν™μ©ν•κ³ , μΈν„°νμ΄μ¤μ™€ κµ¬ν„ κ°μ²΄λ¥Ό λ¶„λ¦¬ν–λ‹¤ β†’ OK
- OCP DIP κ°™μ€ κ°μ²΄ μ§€ν–¥ μ„¤κ³„ μ›μΉ™μ„ μ¤€μν–λ‹¤
    - **κ·Έλ ‡κ² λ³΄μ΄μ§€λ§ μ‚¬μ‹¤μ΄ μ•„λ‹**
- DIP μ£Όλ¬Έ μ„λΉ„μ¤ ν΄λΌμ΄μ–ΈνΈ( `OrderServiceImpl`) λ” `DiscountPolicy` μΈν„°νμ΄μ¤μ— μμ΅΄ν•λ©΄μ„ DIP λ¥Ό μ§€ν‚¨κ±΄ κ°™μ€λ°?
    - ν΄λμ¤μ μμ΅΄ κ΄€κ³„λ¥Ό λ¶„μ„ν•΄λ³΄μ β†’ μ¶”μƒ(μΈν„°νμ΄μ¤) λΏλ§ μ•„λ‹λΌ **κµ¬μ²΄(κµ¬ν„) ν΄λμ¤μ—λ„ μμ΅΄** ν•κ³  μλ‹¤
        - μ¶”μƒ(interface)μμ΅΄: DiscountPolicy
        - κµ¬μ²΄(κµ¬ν„) ν΄λμ¤: FixDiscountPolicy RateDiscountPolicy
- OCP: λ³€κ²½ν•μ§€ μ•κ³  ν™•μ¥ ν• μμλ‹¤κ³  ν–λ”λ°?
    - **μ§€κΈ μ½”λ“λ” κΈ°λ¥μ„ ν™•μ¥ν•΄μ„ λ³€κ²½ν•λ©΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ— μν–¥μ„ μ¤€λ‹¤**
    - **λ”°λΌμ„ OCP λ¥Ό μ„λ°ν•λ‹¤**

## μ™ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ¥Ό λ³€κ²½ν•΄μ•Ό ν• κΉ?

- ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨μΌλ΅ μμ΅΄κ΄€κ³„λ¥Ό λ¶„μ„ν•΄λ³΄μ

## κΈ°λ€ν–λ μμ΅΄κ΄€κ³„

- OrderServiceImpl β†’ DiscountPolicy (FixDiscountPolicy RateDiscountPolicy)

## μ‹¤μ  μμ΅΄κ΄€κ³„

- OrderServiceImpl β†’ DiscountPolicy
    - (FixDiscountPolicy RateDiscountPolicy)
- μΈν„°νμ΄μ¤λ§ μμ΅΄ν•λ”μ¤„ μ•μ•μ§€λ§ μ‹¤μ  κµ¬ν„μ²΄λ„ μμ΅΄ν•κ³  μμ
    - μ‹¤μ  μ½”λ“λ¥Ό λ³΄λ©΄ μμ΅΄ν•κ³  μμ
- DIP μ„λ°!

## μ •μ±… λ³€κ²½

- FixDiscountPolicy  μ—μ„ RateDiscountPolicy λ΅ λ³€κ²½ν•λ” μκ°„ OrderServiceImple μ μ†μ¤ μ½”λ“λ„ λ³€κ²½ν•΄μ•Ό ν•λ‹¤
- OCP μ„λ°

## μ–΄λ–»κ² λ¬Έμ λ¥Ό ν•΄κ²°ν•  μ μμ„κΉ?

- ν΄λΌμ΄μ–ΈνΈ μ½”λ“μΈ OrderServiceImpl μ€ DiscountPolicy μ μΈν„°νμ΄μ¤ λΏλ§ μ•„λ‹λΌ κµ¬μ²΄ ν΄λμ¤λ„ ν•¨κ» μμ΅΄ν•΄μ•Ό ν•λ‹¤
- κ·Έλμ„ κµ¬μ²΄ ν΄λμ¤λ¥Ό λ³€κ²½ν•  λ• ν΄λΌμ΄μ–ΈνΈ μ½”

# κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬

# AppConfig λ¦¬ν©ν† λ§

# μƒλ΅μ΄ κµ¬μ΅°μ™€ ν• μΈ μ •μ±… μ μ©

# μ „μ²΄ νλ¦„ μ •λ¦¬

# μΆ‹μ€ κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ 5κ°€μ§€ μ›μΉ™ μ μ©

# IoC DI κ·Έλ¦¬κ³  μ»¨ν…μ΄λ„

# μ¤ν”„λ§μΌλ΅ μ „ν™ν•κΈ°